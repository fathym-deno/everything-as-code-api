typeof globalThis>"u"&&(window.globalThis=window);var q,y,de,Q,L,ie,fe,G,Ue,I={},_e=[],Fe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function w(e,t){for(var n in t)e[n]=t[n];return e}function pe(e){var t=e.parentNode;t&&t.removeChild(e)}function x(e,t,n){var r,o,l,s={};for(l in t)l=="key"?r=t[l]:l=="ref"?o=t[l]:s[l]=t[l];if(arguments.length>2&&(s.children=arguments.length>3?q.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)s[l]===void 0&&(s[l]=e.defaultProps[l]);return K(e,s,r,o,null)}function K(e,t,n,r,o){var l={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++de,__i:-1,__u:0};return o==null&&y.vnode!=null&&y.vnode(l),l}function E(e){return e.children}function M(e,t){this.props=e,this.context=t}function S(e,t){if(t==null)return e.__?S(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?S(e):null}function he(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return he(e)}}function se(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!$.__r++||ie!==y.debounceRendering)&&((ie=y.debounceRendering)||fe)($)}function $(){var e,t,n,r,o,l,s,u,c;for(L.sort(G);e=L.shift();)e.__d&&(t=L.length,r=void 0,l=(o=(n=e).__v).__e,u=[],c=[],(s=n.__P)&&((r=w({},o)).__v=o.__v+1,y.vnode&&y.vnode(r),ee(s,r,o,n.__n,s.ownerSVGElement!==void 0,32&o.__u?[l]:null,u,l??S(o),!!(32&o.__u),c),r.__.__k[r.__i]=r,ye(u,r,c),r.__e!=l&&he(r)),L.length>t&&L.sort(G));$.__r=0}function me(e,t,n,r,o,l,s,u,c,a,d){var i,N,f,p,m,_=r&&r.__k||_e,h=t.length;for(n.__d=c,Ve(n,t,_),c=n.__d,i=0;i<h;i++)(f=n.__k[i])!=null&&typeof f!="boolean"&&typeof f!="function"&&(N=f.__i===-1?I:_[f.__i]||I,f.__i=i,ee(e,f,N,o,l,s,u,c,a,d),p=f.__e,f.ref&&N.ref!=f.ref&&(N.ref&&te(N.ref,null,f),d.push(f.ref,f.__c||p,f)),m==null&&p!=null&&(m=p),65536&f.__u||N.__k===f.__k?c=ge(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:p&&(c=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=m}function Ve(e,t,n){var r,o,l,s,u,c=t.length,a=n.length,d=a,i=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?K(null,o,null,null,o):Z(o)?K(E,{children:o},null,null,null):o.__b>0?K(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,u=We(o,n,s=r+i,d),o.__i=u,l=null,u!==-1&&(d--,(l=n[u])&&(l.__u|=131072)),l==null||l.__v===null?(u==-1&&i--,typeof o.type!="function"&&(o.__u|=65536)):u!==s&&(u===s+1?i++:u>s?d>c-s?i+=u-s:i--:i=u<s&&u==s-1?u-s:0,u!==r+i&&(o.__u|=65536))):(l=n[r])&&l.key==null&&l.__e&&(l.__e==e.__d&&(e.__d=S(l)),J(l,l,!1),n[r]=null,d--);if(d)for(r=0;r<a;r++)(l=n[r])!=null&&!(131072&l.__u)&&(l.__e==e.__d&&(e.__d=S(l)),J(l,l))}function ge(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=ge(r[o],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function We(e,t,n,r){var o=e.key,l=e.type,s=n-1,u=n+1,c=t[n];if(c===null||c&&o==c.key&&l===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;s>=0||u<t.length;){if(s>=0){if((c=t[s])&&!(131072&c.__u)&&o==c.key&&l===c.type)return s;s--}if(u<t.length){if((c=t[u])&&!(131072&c.__u)&&o==c.key&&l===c.type)return u;u++}}return-1}function ae(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Fe.test(t)?n:n+"px"}function O(e,t,n,r,o){var l;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ae(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ae(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")l=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+l]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,l?ce:ue,l)):e.removeEventListener(t,l?ce:ue,l);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function ue(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(y.event?y.event(e):e)}function ce(e){return this.l[e.type+!0](y.event?y.event(e):e)}function ee(e,t,n,r,o,l,s,u,c,a){var d,i,N,f,p,m,_,h,g,b,R,v,P,T,C,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),l=[u=t.__e=n.__e]),(d=y.__b)&&d(t);e:if(typeof A=="function")try{if(h=t.props,g=(d=A.contextType)&&r[d.__c],b=d?g?g.props.value:d.__:r,n.__c?_=(i=t.__c=n.__c).__=i.__E:("prototype"in A&&A.prototype.render?t.__c=i=new A(h,b):(t.__c=i=new M(h,b),i.constructor=A,i.render=Ke),g&&g.sub(i),i.props=h,i.state||(i.state={}),i.context=b,i.__n=r,N=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),A.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=w({},i.__s)),w(i.__s,A.getDerivedStateFromProps(h,i.__s))),f=i.props,p=i.state,i.__v=t,N)A.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(A.getDerivedStateFromProps==null&&h!==f&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,b),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,b)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(W){W&&(W.__=t)}),R=0;R<i._sb.length;R++)i.__h.push(i._sb[R]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,b),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(f,p,m)})}if(i.context=b,i.props=h,i.__P=e,i.__e=!1,v=y.__r,P=0,"prototype"in A&&A.prototype.render){for(i.state=i.__s,i.__d=!1,v&&v(t),d=i.render(i.props,i.state,i.context),T=0;T<i._sb.length;T++)i.__h.push(i._sb[T]);i._sb=[]}else do i.__d=!1,v&&v(t),d=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++P<25);i.state=i.__s,i.getChildContext!=null&&(r=w(w({},r),i.getChildContext())),N||i.getSnapshotBeforeUpdate==null||(m=i.getSnapshotBeforeUpdate(f,p)),me(e,Z(C=d!=null&&d.type===E&&d.key==null?d.props.children:d)?C:[C],t,n,r,o,l,s,u,c,a),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),_&&(i.__E=i.__=null)}catch(W){t.__v=null,c||l!=null?(t.__e=u,t.__u|=c?160:32,l[l.indexOf(u)]=null):(t.__e=n.__e,t.__k=n.__k),y.__e(W,t,n)}else l==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Oe(n.__e,t,n,r,o,l,s,c,a);(d=y.diffed)&&d(t)}function ye(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)te(n[r],n[++r],n[++r]);y.__c&&y.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(l){l.call(o)})}catch(l){y.__e(l,o.__v)}})}function Oe(e,t,n,r,o,l,s,u,c){var a,d,i,N,f,p,m,_=n.props,h=t.props,g=t.type;if(g==="svg"&&(o=!0),l!=null){for(a=0;a<l.length;a++)if((f=l[a])&&"setAttribute"in f==!!g&&(g?f.localName===g:f.nodeType===3)){e=f,l[a]=null;break}}if(e==null){if(g===null)return document.createTextNode(h);e=o?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,h.is&&h),l=null,u=!1}if(g===null)_===h||u&&e.data===h||(e.data=h);else{if(l=l&&q.call(e.childNodes),_=n.props||I,!u&&l!=null)for(_={},a=0;a<e.attributes.length;a++)_[(f=e.attributes[a]).name]=f.value;for(a in _)f=_[a],a=="children"||(a=="dangerouslySetInnerHTML"?i=f:a==="key"||a in h||O(e,a,null,f,o));for(a in h)f=h[a],a=="children"?N=f:a=="dangerouslySetInnerHTML"?d=f:a=="value"?p=f:a=="checked"?m=f:a==="key"||u&&typeof f!="function"||_[a]===f||O(e,a,f,_[a],o);if(d)u||i&&(d.__html===i.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(i&&(e.innerHTML=""),me(e,Z(N)?N:[N],t,n,r,o&&g!=="foreignObject",l,s,l?l[0]:n.__k&&S(n,0),u,c),l!=null)for(a=l.length;a--;)l[a]!=null&&pe(l[a]);u||(a="value",p!==void 0&&(p!==e[a]||g==="progress"&&!p||g==="option"&&p!==_[a])&&O(e,a,p,_[a],!1),a="checked",m!==void 0&&m!==e[a]&&O(e,a,m,_[a],!1))}return e}function te(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){y.__e(r,n)}}function J(e,t,n){var r,o;if(y.unmount&&y.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||te(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){y.__e(l,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&J(r[o],t,n||typeof e.type!="function");n||e.__e==null||pe(e.__e),e.__=e.__e=e.__d=void 0}function Ke(e,t,n){return this.constructor(e,n)}function Ne(e,t,n){var r,o,l,s;y.__&&y.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,l=[],s=[],ee(t,e=(!r&&n||t).__k=x(E,null,[e]),o||I,I,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?q.call(t.childNodes):null,l,!r&&n?n:o?o.__e:t.firstChild,r,s),ye(l,e,s)}q=_e.slice,y={__e:function(e,t,n,r){for(var o,l,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(u){e=u}throw e}},de=0,Q=function(e){return e!=null&&e.constructor==null},M.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=w({},this.state),typeof e=="function"&&(e=e(w({},n),this.props)),e&&w(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),se(this))},M.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),se(this))},M.prototype.render=E,L=[],fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,G=function(e,t){return e.__v.__b-t.__v.__b},$.__r=0,Ue=0;var be="b7df3272a63bddd1492bf3ad4fdbc003b683c366";var ve="/_frsh",Te="__frsh_c";function Ae(e){if(!e.startsWith("/")||e.startsWith("//"))return e;try{let t=new URL(e,"https://freshassetcache.local");return t.protocol!=="https:"||t.host!=="freshassetcache.local"||t.searchParams.has(Te)?e:(t.searchParams.set(Te,be),t.pathname+t.search+t.hash)}catch(t){return console.warn(`Failed to create asset() URL, falling back to regular path ('${e}'):`,t),e}}function $e(e){if(e.includes("("))return e;let t=e.split(","),n=[];for(let r of t){let o=r.trimStart(),l=r.length-o.length;if(o==="")return e;let s=o.indexOf(" ");s===-1&&(s=o.length);let u=r.substring(0,l),c=o.substring(0,s),a=o.substring(s);n.push(u+Ae(c)+a)}return n.join(",")}function xe(e){if(e.type==="img"||e.type==="source"){let{props:t}=e;if(t["data-fresh-disable-lock"])return;typeof t.src=="string"&&(t.src=Ae(t.src)),typeof t.srcset=="string"&&(t.srcset=$e(t.srcset))}}var Ce="fresh-partial",H="f-partial",U="f-loading",B="f-client-nav",ne="data-fresh-key",k="data-current",D="data-ancestor";function re(e,t){let n=new URL(t,"http://localhost").pathname;return n!=="/"&&n.endsWith("/")&&(n=n.slice(0,-1)),e!=="/"&&e.endsWith("/")&&(e=e.slice(0,-1)),e===n?2:e.startsWith(n+"/")||n==="/"?1:0}function Ee(e,t){let n=e.props,r=n.href;if(typeof r=="string"&&r.startsWith("/")){let o=re(t,r);o===2?(n[k]="true",n["aria-current"]="page"):o===1&&(n[D]="true",n["aria-current"]="true")}}function qe(e,t,n){return e.__k={_frshRootFrag:!0,nodeType:1,parentNode:e,nextSibling:null,get firstChild(){let r=t.nextSibling;return r===n?null:r},get childNodes(){let r=[],o=t.nextSibling;for(;o!==null&&o!==n;)r.push(o),o=o.nextSibling;return r},insertBefore(r,o){e.insertBefore(r,o??n)},appendChild(r){e.insertBefore(r,n)},removeChild(r){e.removeChild(r)}}}function Pe(e){return e.nodeType===Node.COMMENT_NODE}function Be(e){return e.nodeType===Node.TEXT_NODE}function Me(e){return e.nodeType===Node.ELEMENT_NODE&&!("_frshRootFrag"in e)}function _t(e,t){let n=[];j(e,t,[],[x(E,null)],document.body,n);for(let r=0;r<n.length;r++){let{vnode:o,rootFragment:l}=n[r],s=()=>{Ne(o,l)};"scheduler"in window?scheduler.postTask(s):setTimeout(s,0)}}function Se(e){return e.children}Se.displayName="PreactServerComponent";function z(e,t){let n=e.props;n.children==null?n.children=t:Array.isArray(n.children)?n.children.push(t):n.children=[n.children,t]}var le=class extends M{componentDidMount(){ke.set(this.props.name,this)}render(){return this.props.children}};var Re=!1,ke=new Map;function oe(e){let{startNode:t,endNode:n}=e,r=n.parentNode;if(!Re&&t!==null&&t.nodeType===Node.COMMENT_NODE){let o=new Text("");e.startNode=o,r.insertBefore(o,t),t.remove()}if(!Re&&n!==null&&n.nodeType===Node.COMMENT_NODE){let o=new Text("");e.endNode=o,r.insertBefore(o,n),n.remove()}}function we(e,t,n,r,o,l){let[s,u]=o.slice(6).split(":"),c=`#frsh-slot-${s}-${u}-children`,a=document.querySelector(c);if(a!==null){n.push({kind:1,endNode:null,startNode:null,text:o.slice(1)});let d=a.content.cloneNode(!0);j(e,t,n,r,d,l),n.pop()}}function j(e,t,n,r,o,l){let s=o;for(;s!==null;){let u=n.length>0?n[n.length-1]:null;if(Pe(s)){let c=s.data;if(c.startsWith("!--")&&(c=c.slice(3,-2)),c.startsWith("frsh-slot"))n.push({startNode:s,text:c,endNode:null,kind:1}),r.push(x(Se,{id:c}));else if(c.startsWith("frsh-partial")){let[a,d,i,N]=c.split(":");n.push({startNode:s,text:d,endNode:null,kind:2}),r.push(x(le,{name:d,key:N,mode:+i}))}else if(c.startsWith("frsh-key:")){let a=c.slice(9);r.push(x(E,{key:a}))}else if(c.startsWith("/frsh-key:")){let a=r.pop(),d=r[r.length-1];z(d,a),s=s.nextSibling;continue}else if(u!==null&&(c.startsWith("/frsh")||u.text===c)){if(u.endNode=s,n.pop(),u.kind===1){let a=r.pop(),d=r[r.length-1];d.props.children=a,oe(u),s=u.endNode.nextSibling;continue}else if(u!==null&&(u.kind===0||u.kind===2))if(n.length===0){let a=r[r.length-1];a.props.children==null&&we(e,t,n,r,c,l),r.pop();let d=s.parentNode;oe(u);let i=qe(d,u.startNode,u.endNode);l.push({vnode:a,marker:u,rootFragment:i}),s=u.endNode.nextSibling;continue}else{let a=r[r.length-1];a&&a.props.children==null?(we(e,t,n,r,c,l),a.props.children==null&&r.pop()):r.pop(),u.endNode=s,oe(u);let d=r[r.length-1];z(d,a),s=u.endNode.nextSibling;continue}}else if(c.startsWith("frsh")){let[a,d,i]=c.slice(5).split(":"),N=t[Number(d)];n.push({startNode:s,endNode:null,text:c,kind:0});let f=x(e[a],N);i&&(f.key=i),r.push(f)}}else if(Be(s)){let c=r[r.length-1];u!==null&&(u.kind===1||u.kind===2)&&z(c,s.data)}else{let c=r[r.length-1];if(Me(s))if(u!==null&&(u.kind===1||u.kind===2)){let d={children:s.childNodes.length<=1?null:[]},i=!1;for(let f=0;f<s.attributes.length;f++){let p=s.attributes[f];if(p.nodeName===ne){i=!0,d.key=p.nodeValue;continue}else if(p.nodeName===U){let m=p.nodeValue,_=t[Number(m)][U].value;s._freshIndicator=_}d[p.nodeName]=typeof s[p.nodeName]=="boolean"?!0:p.nodeValue}i&&s.removeAttribute(ne);let N=x(s.localName,d);z(c,N),r.push(N)}else{let a=s.getAttribute(U);if(a!==null){let d=t[Number(a)][U].value;s._freshIndicator=d}}s.firstChild&&s.nodeName!=="SCRIPT"&&j(e,t,n,r,s.firstChild,l),u!==null&&u.kind!==0&&r.pop()}s!==null&&(s=s.nextSibling)}}var ze="Unable to process partial response.";async function X(e,t={}){t.redirect="follow",e.searchParams.set(Ce,"true");let n=await fetch(e,t);await Xe(n)}function De(e){document.querySelectorAll("a").forEach(t=>{let n=re(e.pathname,t.href);n===2?(t.setAttribute(k,"true"),t.setAttribute("aria-current","page"),t.removeAttribute(D)):n===1?(t.setAttribute(D,"true"),t.setAttribute("aria-current","true"),t.removeAttribute(k)):(t.removeAttribute(k),t.removeAttribute(D),t.removeAttribute("aria-current"))})}function Ie(e,t,n,r){let o=null,l=r.firstChild,s=0;for(;l!==null;){if(Pe(l)){let u=l.data;if(u.startsWith("frsh-partial"))o=l,s++;else if(u.startsWith("/frsh-partial")){s--;let c={_frshRootFrag:!0,nodeType:1,nextSibling:null,firstChild:o,parentNode:r,get childNodes(){let a=[o],d=o;for(;(d=d.nextSibling)!==null;)a.push(d);return a}};j(t,n[0]??[],[],[x(E,null)],c,e)}}else s===0&&Me(l)&&Ie(e,t,n,l);l=l.nextSibling}}var Y=class extends Error{};async function Xe(e){let t=e.headers.get("Content-Type"),n=e.headers.get("X-Fresh-UUID");if(t!=="text/html; charset=utf-8")throw new Error(ze);let r=await e.text(),o=new DOMParser().parseFromString(r,"text/html"),l=[],s={},u=o.getElementById(`__FRSH_PARTIAL_DATA_${n}`),c=null;u!==null&&(c=JSON.parse(u.textContent),l.push(...Array.from(Object.entries(c.islands)).map(async p=>{let m=await import(`${p[1].url}`);s[p[0]]=m[p[1].export]})));let a=o.getElementById(`__FRSH_STATE_${n}`)?.textContent,d=[[],[]],i;c!==null&&c.signals!==null&&l.push(import(c.signals).then(p=>{i=p.signal}));let N;a&&c&&c.deserializer!==null&&l.push(import(c.deserializer).then(p=>N=p.deserialize)),await Promise.all(l),a&&(d=N?N(a,i):JSON.parse(a)?.v);let f=[];if(Ie(f,s,d,o.body),f.length===0)throw new Y(`Found no partials in HTML response. Please make sure to render at least one partial. Requested url: ${e.url}`);o.title&&(document.title=o.title),Array.from(o.head.childNodes).forEach(p=>{let m=p;if(m.nodeName!=="TITLE"){if(m.nodeName==="META"){let _=m;if(_.hasAttribute("charset"))return;let h=_.name;if(h!==""){let g=document.head.querySelector(`meta[name="${h}"]`);g!==null?g.content!==_.content&&(g.content=_.content):document.head.appendChild(_)}else{let g=m.getAttribute("property"),b=document.head.querySelector(`meta[property="${g}"]`);b!==null?b.content!==_.content&&(b.content=_.content):document.head.appendChild(_)}}else if(m.nodeName==="LINK"){let _=m;if(_.rel==="modulepreload")return;_.rel==="stylesheet"&&Array.from(document.head.querySelectorAll("link")).find(g=>g.href===_.href)===void 0&&document.head.appendChild(_)}else if(m.nodeName==="SCRIPT"){if(m.src===`${ve}/refresh.js`)return}else if(m.nodeName==="STYLE"){let _=m;_.id===""&&document.head.appendChild(_)}}});for(let p=0;p<f.length;p++){let{vnode:m,marker:_}=f[p],h=ke.get(_.text);if(!h)console.warn(`Partial "${_.text}" not found. Skipping...`);else{let g=m.props.mode,b=m.props.children;if(g===0)h.props.children=b;else{let R=h.props.children,v=Array.isArray(R)?R:[R];if(g===1)v.push(b);else{Q(b)||(b=x(E,null,b)),b.key==null&&(b.key=v.length);let P=h.__v.__k;if(Array.isArray(P))for(let T=0;T<P.length;T++){let C=P[T];if(C.key==null)C.key=T;else break}for(let T=0;T<v.length;T++){let C=v[T];if(C.key==null)C.key=T;else break}v.unshift(b)}h.props.children=v}h.setState({})}}}var Le=y.vnode;y.vnode=e=>{xe(e),e.type==="a"&&Ee(e,location.pathname),Le&&Le(e)};function F(e){if(e===null)return document.querySelector(`[${B}="true"]`)!==null;let t=e.closest(`[${B}]`);return t===null?!1:t.getAttribute(B)==="true"}var V=history.state?.index||0;if(!history.state){let e={index:V,scrollX,scrollY};history.replaceState(e,document.title)}function He(e){if(e.href!==window.location.href){let t={index:V,scrollX:window.scrollX,scrollY:window.scrollY};history.replaceState({...t},"",location.href),V++,t.scrollX=0,t.scrollY=0,history.pushState(t,"",e.href)}}document.addEventListener("click",async e=>{let t=e.target;if(t&&t instanceof HTMLElement){let n=t;if(t.nodeName!=="A"&&(t=t.closest("a")),t&&t instanceof HTMLAnchorElement&&t.href&&(!t.target||t.target==="_self")&&t.origin===location.origin&&e.button===0&&!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)&&!e.defaultPrevented){let r=t.getAttribute(H);if(t.getAttribute("href")?.startsWith("#")||!F(t))return;let o=t._freshIndicator;o!==void 0&&(o.value=!0),e.preventDefault();let l=new URL(t.href);try{He(l);let s=new URL(r||l.href,location.href);await X(s),De(l),scrollTo({left:0,top:0,behavior:"instant"})}finally{o!==void 0&&(o.value=!1)}}else{let r=n;if(r.nodeName!=="A"&&(r=r.closest("button")),r!==null&&r instanceof HTMLButtonElement&&(r.type!=="submit"||r.form===null)){let o=r.getAttribute(H);if(o===null||!F(r))return;let l=new URL(o,location.href);await X(l)}}}});addEventListener("popstate",async e=>{if(e.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}let t=history.state;if(V=t.index??V+1,!F(null)){location.reload();return}history.scrollRestoration&&(history.scrollRestoration="manual");let r=new URL(location.href,location.origin);try{await X(r),De(r),scrollTo({left:t.scrollX??0,top:t.scrollY??0,behavior:"instant"})}catch(o){if(o instanceof Y){location.reload();return}throw o}});document.addEventListener("submit",async e=>{let t=e.target;if(t!==null&&t instanceof HTMLFormElement&&!e.defaultPrevented){if(!F(t)||e.submitter!==null&&!F(e.submitter))return;let n=e.submitter?.getAttribute("formmethod")?.toLowerCase()??t.method.toLowerCase();if(n!=="get"&&n!=="post"&&n!=="dialog")return;let r=e.submitter?.getAttribute(H)??e.submitter?.getAttribute("formaction")??t.getAttribute(H)??t.action;if(r!==""){e.preventDefault();let o=new URL(r,location.href),l;n==="get"?new URLSearchParams(new FormData(t)).forEach((u,c)=>o.searchParams.set(c,u)):l={body:new FormData(t),method:n},He(o),await X(o,l)}}});export{Xe as applyPartials,_t as revive};
